> 难度：中等
- 最难的去重了
- 思路：
  - 单调栈的变化
  - 难点：难点在于遇到当要处理栈中字符，且该字符在后面字符串中不会遇到时的处理
  - https://leetcode-cn.com/problems/remove-duplicate-letters/solution/you-qian-ru-shen-dan-diao-zhan-si-lu-qu-chu-zhong-/

> 题目

<div align="center" style="zoom:80%"><img src="./pic/316-1.png"></div>

> 代码

```cpp
class Solution {
public:
    string removeDuplicateLetters(string s) {
        if (s == "") return "";

        stack<char> stk;
        int pos = 0;
        // 初始化记录
        map<char, int> record;
        bool exist[256]{false};
        for (auto c : s) {
            ++record[c];
        }

        // 单调栈（增）
        for (int i = 0; i < s.length(); ++i) {
            if (exist[s[i]]) {
                --record[s[i]];
                continue;
            }
            while (!stk.empty() && s[i] < stk.top()) {
                if (record[stk.top()] != 0) {
                    exist[stk.top()] = false;
                    stk.pop();
                }else{
                    break;
                }
            }
            stk.push(s[i]);
            exist[s[i]] = true;
            --record[s[i]];
        }

        string rtn;
        while (!stk.empty()) {
            rtn += stk.top();
            stk.pop();
        }
        int left = 0,right = rtn.length()-1;
        while(left <right){
            auto t = rtn[right];
            rtn[right] = rtn[left];
            rtn[left] = t;
            ++left;
            --right;
        }
        return rtn;
    }
};

```

```
执行用时：4 ms, 在所有 C++ 提交中击败了62.46%的用户
内存消耗：6.7 MB, 在所有 C++ 提交中击败了21.20%的用户
```